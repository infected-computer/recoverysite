const e=async e=>{try{const n={name:e.name?.trim()||"",phone:e.phone?.trim()||"",email:e.email?.trim()||"",message:e.message?.trim()||""};if(!n.name||!n.phone||!n.message){const e=[];return n.name||e.push("שם"),n.phone||e.push("טלפון"),n.message||e.push("הודעה"),{success:!1,error:`שדות חובה חסרים: ${e.join(", ")}`}}if(n.message.length<5)return{success:!1,error:"ההודעה קצרה מדי"};const t="/.netlify/functions/send-email",a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)});let r;try{const e=await a.text();r=JSON.parse(e)}catch(s){throw new Error("תגובה לא תקינה מהשרת")}return a.ok?{success:!0,id:r.id,message:r.message||"הודעה נשלחה בהצלחה"}:{success:!1,error:r?.error||`שגיאת שרת (${a.status})`}}catch(n){let e="שגיאה בשליחת ההודעה";return n instanceof TypeError&&n.message.includes("fetch")?e="בעיית חיבור. בדוק את החיבור לאינטרנט":n.message?.includes("404")?e="שירות המייל אינו זמין כרגע":n.message?.includes("500")&&(e="שגיאת שרת פנימית"),{success:!1,error:e}}},s=e=>{const s=`שלום! שמי ${e.name}\nטלפון: ${e.phone}\n${e.email?`אימייל: ${e.email}`:""}\nהודעה: ${e.message}`,n=`https://wa.me/972536657279?text=${encodeURIComponent(s)}`;window.open(n,"_blank")};export{s as a,e as s};
