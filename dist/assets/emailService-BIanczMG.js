import{c as e}from"./index-Cr44C3Mi.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s=e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),n=e=>{return s=void 0,n=null,t=function*(){var s,n,t,a,r,o;try{const r={name:(null==(s=e.name)?void 0:s.trim())||"",phone:(null==(n=e.phone)?void 0:n.trim())||"",email:(null==(t=e.email)?void 0:t.trim())||"",message:(null==(a=e.message)?void 0:a.trim())||""};if(!r.name||!r.phone||!r.message){const e=[];return r.name||e.push("שם"),r.phone||e.push("טלפון"),r.message||e.push("הודעה"),{success:!1,error:`שדות חובה חסרים: ${e.join(", ")}`}}if(r.message.length<5)return{success:!1,error:"ההודעה קצרה מדי"};const o="/.netlify/functions/send-email",l=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});let c;try{const e=yield l.text();c=JSON.parse(e)}catch(i){throw new Error("תגובה לא תקינה מהשרת")}return l.ok?{success:!0,id:c.id,message:c.message||"הודעה נשלחה בהצלחה"}:{success:!1,error:(null==c?void 0:c.error)||`שגיאת שרת (${l.status})`}}catch(l){let e="שגיאה בשליחת ההודעה";return l instanceof TypeError&&l.message.includes("fetch")?e="בעיית חיבור. בדוק את החיבור לאינטרנט":(null==(r=l.message)?void 0:r.includes("404"))?e="שירות המייל אינו זמין כרגע":(null==(o=l.message)?void 0:o.includes("500"))&&(e="שגיאת שרת פנימית"),{success:!1,error:e}}},new Promise((e,a)=>{var r=e=>{try{i(t.next(e))}catch(s){a(s)}},o=e=>{try{i(t.throw(e))}catch(s){a(s)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,o);i((t=t.apply(s,n)).next())});var s,n,t},t=e=>{const s=`שלום! שמי ${e.name}\nטלפון: ${e.phone}\n${e.email?`אימייל: ${e.email}`:""}\nהודעה: ${e.message}`,n=`https://wa.me/972536657279?text=${encodeURIComponent(s)}`;window.open(n,"_blank")};export{s as S,t as a,n as s};
