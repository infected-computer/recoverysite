import{c as u}from"./index-BQwnEAws.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=u("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),d=async e=>{var a,t,c,l,m,p,g,h;console.log("[EmailService] Starting email send process with data:",{name:e.name,phone:((a=e.phone)==null?void 0:a.slice(0,3))+"***",email:e.email?e.email.split("@")[0]+"@***":"none",messageLength:(t=e.message)==null?void 0:t.length});try{const s={name:((c=e.name)==null?void 0:c.trim())||"",phone:((l=e.phone)==null?void 0:l.trim())||"",email:((m=e.email)==null?void 0:m.trim())||"",message:((p=e.message)==null?void 0:p.trim())||""};if(!s.name||!s.phone||!s.message){const o=[];return s.name||o.push("שם"),s.phone||o.push("טלפון"),s.message||o.push("הודעה"),console.error("[EmailService] Missing required fields:",o),{success:!1,error:`שדות חובה חסרים: ${o.join(", ")}`}}if(s.message.length<5)return console.error("[EmailService] Message too short"),{success:!1,error:"ההודעה קצרה מדי"};console.log("[EmailService] Validation passed, sending to Netlify function...");const n="/.netlify/functions/send-email";console.log("[EmailService] Using API URL:",n);const i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});console.log("[EmailService] Response received:",{status:i.status,statusText:i.statusText,ok:i.ok});let r;try{const o=await i.text();console.log("[EmailService] Raw response:",o),r=JSON.parse(o)}catch(o){throw console.error("[EmailService] Failed to parse response:",o),new Error("תגובה לא תקינה מהשרת")}return i.ok?(console.log("[EmailService] Email sent successfully:",r),{success:!0,id:r.id,message:r.message||"הודעה נשלחה בהצלחה"}):(console.error("[EmailService] API error:",r),{success:!1,error:(r==null?void 0:r.error)||`שגיאת שרת (${i.status})`})}catch(s){console.error("[EmailService] Unexpected error:",s);let n="שגיאה בשליחת ההודעה";return s instanceof TypeError&&s.message.includes("fetch")?n="בעיית חיבור. בדוק את החיבור לאינטרנט":(g=s.message)!=null&&g.includes("404")?n="שירות המייל אינו זמין כרגע":(h=s.message)!=null&&h.includes("500")&&(n="שגיאת שרת פנימית"),{success:!1,error:n}}},E=e=>{const a=`שלום! שמי ${e.name}
טלפון: ${e.phone}
${e.email?`אימייל: ${e.email}`:""}
הודעה: ${e.message}`,t=`https://wa.me/972536657279?text=${encodeURIComponent(a)}`;window.open(t,"_blank")};export{S,E as a,d as s};
